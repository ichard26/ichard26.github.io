<!doctype html><html lang=en-ca dir=auto><head><meta charset=utf-8><meta http-equiv=X-UA-Compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=robots content="index, follow"><title>What's new in pip 25.1 - Dependency groups! | Richard Si</title>
<meta name=keywords content="pip,release"><meta name=description content="pip 25.1 introduces support for Dependency Groups (PEP 735), resumable downloads, and an installation progress bar. Dependency resolution has also received a raft of bugfixes and improvements."><meta name=author content><link rel=canonical href=https://ichard26.github.io/blog/2025/04/whats-new-in-pip-25.1/><link crossorigin=anonymous href=/assets/css/stylesheet.0bd812de4c712334307c155dff81892f2ba44c911203cd8f1c88c0856a1b5410.css integrity="sha256-C9gS3kxxIzQwfBVd/4GJLyukTJESA82PHIjAhWobVBA=" rel="preload stylesheet" as=style><link rel=icon href=https://ichard26.github.io/favicon.ico><link rel=icon type=image/png sizes=16x16 href=https://ichard26.github.io/favicon-16x16.png><link rel=icon type=image/png sizes=32x32 href=https://ichard26.github.io/favicon-32x32.png><link rel=apple-touch-icon href=https://ichard26.github.io/apple-touch-icon.png><link rel=mask-icon href=https://ichard26.github.io/safari-pinned-tab.svg><meta name=theme-color content="#2e2e33"><meta name=msapplication-TileColor content="#2e2e33"><link rel=alternate hreflang=en-ca href=https://ichard26.github.io/blog/2025/04/whats-new-in-pip-25.1/><noscript><style>#theme-toggle,.top-link{display:none}</style><style>@media(prefers-color-scheme:dark){:root{--theme:rgb(29, 30, 32);--entry:rgb(46, 46, 51);--primary:rgb(218, 218, 219);--secondary:rgb(155, 156, 157);--tertiary:rgb(65, 66, 68);--content:rgb(196, 196, 197);--code-block-bg:rgb(46, 46, 51);--code-bg:rgb(55, 56, 62);--border:rgb(51, 51, 51)}.list{background:var(--theme)}.list:not(.dark)::-webkit-scrollbar-track{background:0 0}.list:not(.dark)::-webkit-scrollbar-thumb{border-color:var(--theme)}}</style></noscript><script defer data-domain=ichard26.github.io src=https://webstats.internal.floralily.dev/js/script.outbound-links.js></script><meta name=google-site-verification content="4PNzC3Db8jI_wn9D8lPdAh4B0skrLZHNbQBgVF1XtAo"><meta property="og:url" content="https://ichard26.github.io/blog/2025/04/whats-new-in-pip-25.1/"><meta property="og:site_name" content="Richard Si"><meta property="og:title" content="What's new in pip 25.1 - Dependency groups!"><meta property="og:description" content="pip 25.1 introduces support for Dependency Groups (PEP 735), resumable downloads, and an installation progress bar. Dependency resolution has also received a raft of bugfixes and improvements."><meta property="og:locale" content="en-ca"><meta property="og:type" content="article"><meta property="article:section" content="blog"><meta property="article:published_time" content="2025-04-25T00:00:00-04:00"><meta property="article:tag" content="Pip"><meta property="article:tag" content="Release"><meta name=twitter:card content="summary"><meta name=twitter:title content="What's new in pip 25.1 - Dependency groups!"><meta name=twitter:description content="pip 25.1 introduces support for Dependency Groups (PEP 735), resumable downloads, and an installation progress bar. Dependency resolution has also received a raft of bugfixes and improvements."><script type=application/ld+json>{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"name":"Blog","item":"https://ichard26.github.io/blog/"},{"@type":"ListItem","position":2,"name":"What's new in pip 25.1 - Dependency groups!","item":"https://ichard26.github.io/blog/2025/04/whats-new-in-pip-25.1/"}]}</script><script type=application/ld+json>{"@context":"https://schema.org","@type":"BlogPosting","headline":"What's new in pip 25.1 - Dependency groups!","name":"What\u0027s new in pip 25.1 - Dependency groups!","description":"pip 25.1 introduces support for Dependency Groups (PEP 735), resumable downloads, and an installation progress bar. Dependency resolution has also received a raft of bugfixes and improvements.","keywords":["pip","release"],"articleBody":"On April 26, 2025, we, the pip team released pip 25.1.\nCompared to previous releases, this release is a large one. The changelog is quite long. Among the changes, there are numerous new features, including an install progress bar and support for Dependency Groups!\nI won’t cover every single change here, so as always, please refer to the changelog for the full list of changes.\nKey features ✨ Dependency groups (PEP 735) Support for installing Dependency Groups (PEP 735) is now available with the --group option.\nWhat are Dependency Groups? Dependency Groups are the modern standardized replacement for non-pinned subject-specific *-requirements.txt files and extras that are not meant for use by end users.\nThey are meant to replace files like test-requirements.txt or extras like [test], [dev], or [doc]. They are defined in a pyproject.toml file under the dependency-groups table.1\nFirst, let’s assume there is a pyproject.toml file in the current directory that defines test and lint dependency groups:\n# pyproject.toml [dependency-groups] test = [\"pytest\", \"pytest-xdist\"] lint = [\"mypy\", \"isort\"] To install the test group, one can simply pass --group test.\npip install --group test You can repeat the option to install multiple groups. You can also use --group with -r, -e, and any other dependency specifier.\npip install . --group lint --group test -r my-old-requirements.txt To install a dependency group from a pyproject.toml file that exists in a different directory, state the path before the group separated with a colon.\npip install --group ./dev/vem/pyproject.toml:lint Warning pip will NOT look in parent directories for a pyproject.toml file to install dependency groups from. pip does not have the concept of a project workflow.2\nAdditionally, Dependency Groups are a standardized feature, thus pip-specific options are NOT supported. If you need to pass --no-deps or some other pip flag, you should continue to use a requirements.txt file.3\nPlease read the pip user guide for more information. You can also read the motivation and rationale sections of PEP 735 if you are curious about why this feature came about.\nThank you to Stephen Rosen for writing and shepherding PEP 735 and contributing the pip implementation. Congratulations! 🎉\nPackage installation progress bar A progress bar has been added to pip install that tracks the installation step.\nPreviously, pip would provide no feedback on how many packages have been installed. Is pip slowly installing a large package (e.g., torch) or is pip simply stuck? Who knows! The only time you do know is when pip first needs to uninstall an existing package to install a new version, emitting Attempting uninstall: mypackage as it goes.\nNow, you can install every single [Home Hssistant] dependency and know much progress pip has made after dependency resolution and downloads.\nResumable downloads Support for automatic download retrying is available as an experimental feature starting with pip 25.1. The download retry limit can be configured using the --resume-retries option.\nImportant Download retrying (--resume-retries) is separate from connection retrying (--retries).\nWhen a download terminates early, pip will attempt to resume the download from where it left off. If the remote server does not support download resumption, pip will fall back to restarting the download. If the download is still incomplete after pip has run out of retries, a diagnostic error will be raised.\nIt has been a long-standing complaint that pip is unreliable on poor/flaky connections. Any downloads of a sufficiently large package would fail midway through, forcing the user to retry the entire pip command, only for it to fail again. For users on a slow or metered connection, pip is likely unusable. And if hash-checking was enabled, then a confusing and misleading hash mismatch error would be raised.\nIf you use the feature, please let us know how it goes! We want to make sure it works well. Assuming nothing is fundamentally broken, --resume-retries will be changed in the next release to allow a few download retries by default.\nThank you to George Margaritis for contributing this feature!\nExperimental lockfile (PEP 751) generation: pip lock pylock.toml (PEP 751) is the recently accepted standard for Python lockfiles. Lockfiles are alternatives to the classic requirements.txt format, designed to enable reproducible installation in a Python environment.\npip 25.1 makes the first step at supporting the new lockfile format. The pip lock command has been added to create a pylock.toml from a set of requirements.\nHere’s an example locking the pip project in editable mode and six.\npip lock -e ./pip six --output - -qq lock-version = \"1.0\" created-by = \"pip\" [[packages]] name = \"pip\" [packages.directory] path = \"pip\" editable = true [[packages]] name = \"six\" version = \"1.17.0\" [[packages.wheels]] name = \"six-1.17.0-py2.py3-none-any.whl\" url = \"https://files.pythonhosted.org/packages/b7/ce/149a00dd41f10bc29e5921b496af8b574d8413afcd5e30dfa0ed46c2cc5e/six-1.17.0-py2.py3-none-any.whl\" [packages.wheels.hashes] sha256 = \"4721f391ed90541fddacab5acf947aa0d3dc7d27b2e1e8eda2be8970586c3274\" The produced lockfile is specific to the Python version and platform pip is invoked under. In other words, the lockfile is NOT a universal lockfile.\nThe command is experimental, meant to enable basic locked installation scenarios. It is expected to undergo further development once the lockfile standard sees more widespread adoption and matures.\nInstalling from a lockfile is unsupported, but it is on the roadmap.\npip index versions is stable The pip index versions command is no longer experimental. It is the modern replacement for the old pip install mypackage== hack which used to be an easy way to get the list of all available versions.\npip index versions six six (1.17.0) Available versions: 1.17.0, 1.16.0, 1.15.0, 1.14.0, 1.13.0, 1.12.0, 1.11.0, 1.10.0, 1.9.0, 1.8.0, 1.7.3, 1.7.2, 1.7.1, 1.7.0, 1.6.1, 1.6.0, 1.5.2, 1.5.1, 1.5.0, 1.4.1, 1.4.0, 1.3.0, 1.2.0, 1.1.0, 1.0.0, 0.9.2, 0.9.1, 0.9.0 INSTALLED: 1.17.0 LATEST: 1.17.0 In addition, you can now ask for JSON output using the --json flag.\npip index versions six --json {\"name\": \"six\", \"versions\": [\"1.17.0\", \"1.16.0\", \"1.15.0\", \"1.14.0\", \"1.13.0\", \"1.12.0\", \"1.11.0\", \"1.10.0\", \"1.9.0\", \"1.8.0\", \"1.7.3\", \"1.7.2\", \"1.7.1\", \"1.7.0\", \"1.6.1\", \"1.6.0\", \"1.5.2\", \"1.5.1\", \"1.5.0\", \"1.4.1\", \"1.4.0\", \"1.3.0\", \"1.2.0\", \"1.1.0\", \"1.0.0\", \"0.9.2\", \"0.9.1\", \"0.9.0\"], \"latest\": \"1.17.0\", \"installed_version\": \"1.17.0\"} If you use pip index versions programmatically, you are encouraged to switch to the --json output. Not only is it easier to parse, but you will avoid breakage if the human-friendly format ever changes later.\nThank you to Krishan Bhasin for stabilizing pip index versions and adding JSON support!\nKey bugfixes Dependency resolution improvements Dependency resolution is not my area of expertise, so I’m going to shamelessly steal the changelog entries that Damian Shaw wrote:\nSpeed up resolution by first only considering the “priorities” of candidates that must be required to complete the resolution.\nImproved heuristics for determining the order of dependency resolution by preferring direct URL candidates and requirements with upper bounds.4\nThe upgrade to ResolveLib 1.1.0 fixes a known issue where pip would report a ResolutionImpossible error even though there is a valid solution. However, some very complex scenarios that previously resolved may resolve slower or fail with an ResolutionTooDeep error.\nThe ResolutionTooDeep error has been converted into a more user-friendly diagnostic error. If you have any real-world examples that result in a ResolutionTooDeep error, we would like to hear them!\nLegacy .egg distributions are only detected once There are several formats that an installed package can be recorded in. Today, virtually every package is installed using the .dist-info format. However, legacy .egg distributions are still kicking around.\nSupport for .egg distributions has been deprecated since pip 23.2. In pip 25.1, this deprecation was finalized… but wait, pip still supports .egg distributions! It turns out that importlib.metadata, the library used to discover installed packages on Python 3.11+, supports .egg distributions just fine.\nThis meant that .egg distributions were being discovered several times. The importlib.metadata backend would find it, and then the pkg_resources backend, leading to this confusing pip list output.\npip list Package Version ----------------------------- --------------------- mypackage 0.7.16 mypackage 0.7.16 In pip 25.1, the pkg_resources backend is no longer used to discover .egg distributions and this duplication will not occur. Warnings about the .egg deprecation will no longer be printed.\nDeprecations \u0026 upcoming removals Starting with this release, the pip project no longer supports Python 3.8.\nIn addition, here is a list of current deprecations and the release they will be removed. As always, any given removal may be pushed to a future release as needed.\nNon-bare project name in egg fragment To be removed in pip 25.2 See the pip 25.0 post for more details. Legacy setup.py editable installs To be removed in pip 25.3 Please read the deprecation issue for more details and advice. This was scheduled for removal in 25.0 and then 25.1, but it got pushed back (again) to coincide with the deprecation of setup.py bdist_wheel installs. Legacy setup.py bdist_wheel installs To be removed in pip 25.3 Please read the deprecation issue for more details and advice, however, the summary is that pip will stop running setup.py bdist_wheel directly to build a wheel for installation. This is a compatibility fallback for old environments that do not support the modern PEP 517 interface. Non-standard wheel filenames To be removed in pip 25.3 This is a continuation of the old deprecation as the original deprecation did not catch all non-standard wheel filenames. See the pip 25.0 post for more details. Acknowledgements Thank you to Damian Shaw, Emma Smith, Hugo van Kemenade, and Stéphane Bidoul reviewing the draft of this post. Any typos or glaring mistakes are my own.\nThey are not defined under the project table because Dependency Groups are meant to be a general feature that work regardless of whether you have an actual Python package to install or not. ↩︎\nThere has been extensive discussion about pip’s fundamental design and whether it should change. There is too much to easily summarize, but broadly, pip has always been designed as a package manager, and not as a project workflow tool. There are many other tools that compete in the project management space. The consensus during review is that pip is valuable as a foundational tool that simply manages your installed Python packages and does what you want without too much fuss. More practically, shifting to a project-based model would constitute a major redesign of the pip UI and UX. ↩︎\nThis is a limitation of the specification. However, if sufficient consensus builds around certain tool-specific flags, they can be standardized so they can be included in Dependency Groups in the future. ↩︎\nPlease don’t add upper bounds unless you know for a fact your codebase is incompatible with the newer versions. Pre-emptive upper-bounds will not help dependency resolution and are generally considered harmful. ↩︎\n","wordCount":"1728","inLanguage":"en-ca","datePublished":"2025-04-25T00:00:00-04:00","dateModified":"0001-01-01T00:00:00Z","mainEntityOfPage":{"@type":"WebPage","@id":"https://ichard26.github.io/blog/2025/04/whats-new-in-pip-25.1/"},"publisher":{"@type":"Person","name":"Richard Si","logo":{"@type":"ImageObject","url":"https://ichard26.github.io/favicon.ico"}}}</script></head><body id=top><script>localStorage.getItem("pref-theme")==="dark"?document.body.classList.add("dark"):localStorage.getItem("pref-theme")==="light"?document.body.classList.remove("dark"):window.matchMedia("(prefers-color-scheme: dark)").matches&&document.body.classList.add("dark")</script><header class=header><nav class=nav><div class=logo><a href=https://ichard26.github.io/ accesskey=h title="Richard Si (Alt + H)">Richard Si</a><div class=logo-switches><button id=theme-toggle accesskey=t title="(Alt + T)"><svg id="moon" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"/></svg><svg id="sun" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="5"/><line x1="12" y1="1" x2="12" y2="3"/><line x1="12" y1="21" x2="12" y2="23"/><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/><line x1="1" y1="12" x2="3" y2="12"/><line x1="21" y1="12" x2="23" y2="12"/><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/></svg></button></div></div><ul id=menu><li><a href=https://ichard26.github.io/about/ title=About><span>about</span></a></li><li><a href=https://ichard26.github.io/blog/ title=Writing><span>writing</span></a></li><li><a href=https://ichard26.github.io/privacy/ title="Privacy Statement"><span>privacy</span></a></li></ul></nav></header><main class=main><article class=post-single><header class=post-header><h1 class="post-title entry-hint-parent">What's new in pip 25.1 - Dependency groups!</h1><div class=post-description>pip 25.1 introduces support for Dependency Groups (PEP 735), resumable downloads, and an installation progress bar. Dependency resolution has also received a raft of bugfixes and improvements.</div><div class=post-meta><span class=post-date title='Posted on 2025-04-25 00:00:00 -0400 EDT'>April 25, 2025</span><span class=delimiter>&nbsp;·&nbsp;</span>9 minutes</div></header><div class=toc><details><summary accesskey=c title="(Alt + C)"><span class=details>Table of Contents</span></summary><div class=inner><ul><li><a href=#key-features- aria-label="Key features ✨">Key features ✨</a><ul><li><a href=#dependency-groups-pep-735 aria-label="Dependency groups (PEP 735)">Dependency groups (PEP 735)</a></li><li><a href=#package-installation-progress-bar aria-label="Package installation progress bar">Package installation progress bar</a></li><li><a href=#resumable-downloads aria-label="Resumable downloads">Resumable downloads</a></li><li><a href=#experimental-lockfile-pep-751-generation-pip-lock aria-label="Experimental lockfile (PEP 751) generation: pip lock">Experimental lockfile (PEP 751) generation: pip lock</a></li><li><a href=#pip-index-versions-is-stable aria-label="pip index versions is stable">pip index versions is stable</a></li></ul></li><li><a href=#key-bugfixes aria-label="Key bugfixes">Key bugfixes</a><ul><li><a href=#dependency-resolution-improvements aria-label="Dependency resolution improvements">Dependency resolution improvements</a></li><li><a href=#legacy-egg-distributions-are-only-detected-once aria-label="Legacy .egg distributions are only detected once">Legacy .egg distributions are only detected once</a></li></ul></li><li><a href=#deprecations--upcoming-removals aria-label="Deprecations & upcoming removals">Deprecations & upcoming removals</a></li><li><a href=#acknowledgements aria-label=Acknowledgements>Acknowledgements</a></li></ul></div></details></div><div class=post-content><p>On April 26, 2025, we, the pip team released pip 25.1.</p><p>Compared to previous releases, this release is a large one. The <a href=https://pip.pypa.io/en/latest/news/#v25-1 target=_blank>changelog</a> is quite long.
Among the changes, there are numerous new features, including an install progress bar and
support for <a href=https://packaging.python.org/en/latest/specifications/dependency-groups/ target=_blank>Dependency Groups</a>!</p><p>I won&rsquo;t cover every single change here, so as always, please refer to the changelog for
the full list of changes.</p><h2 id=key-features->Key features ✨<a hidden class=anchor aria-hidden=true href=#key-features->#</a></h2><h3 id=dependency-groups-pep-735>Dependency groups (PEP 735)<a hidden class=anchor aria-hidden=true href=#dependency-groups-pep-735>#</a></h3><p>Support for installing <a href=https://packaging.python.org/en/latest/specifications/dependency-groups/ target=_blank>Dependency Groups</a> (PEP 735) is now available with the <code>--group</code>
option.</p><link rel=stylesheet href=/css/vendors/admonitions.5c73bad2903e7d2d44ad118370ebd8c2cf5f239d4d93c283e55c00f2f8d30746.css integrity="sha256-XHO60pA+fS1ErRGDcOvYws9fI51Nk8KD5VwA8vjTB0Y=" crossorigin=anonymous><div class="admonition tip"><div class=admonition-header><svg viewBox="0 0 384 512"><path d="M272 384c9.6-31.9 29.5-59.1 49.2-86.2 5.2-7.1 10.4-14.2 15.4-21.4 19.8-28.5 31.4-63 31.4-100.3C368 78.8 289.2.0 192 0S16 78.8 16 176c0 37.3 11.6 71.9 31.4 100.3 5 7.2 10.2 14.3 15.4 21.4 19.8 27.1 39.7 54.4 49.2 86.2h160zM192 512c44.2.0 80-35.8 80-80v-16H112v16c0 44.2 35.8 80 80 80zM112 176c0 8.8-7.2 16-16 16s-16-7.2-16-16c0-61.9 50.1-112 112-112 8.8.0 16 7.2 16 16s-7.2 16-16 16c-44.2.0-80 35.8-80 80z"/></svg>
<span>What are Dependency Groups?</span></div><div class=admonition-content><p><a href=https://packaging.python.org/en/latest/specifications/dependency-groups/ target=_blank>Dependency Groups</a> are the modern standardized replacement for non-pinned
subject-specific <code>*-requirements.txt</code> files and extras that are not meant for use by end users.</p><p>They are meant to replace files like <code>test-requirements.txt</code> or extras like <code>[test]</code>,
<code>[dev]</code>, or <code>[doc]</code>. They are defined in a <code>pyproject.toml</code> file under the
<code>dependency-groups</code> table.<sup id=fnref:1><a href=#fn:1 class=footnote-ref role=doc-noteref>1</a></sup></p></div></div><p>First, let&rsquo;s assume there is a <code>pyproject.toml</code> file in the current directory that defines
<code>test</code> and <code>lint</code> dependency groups:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-toml data-lang=toml><span style=display:flex><span><span style=color:#75715e># pyproject.toml</span>
</span></span><span style=display:flex><span>[<span style=color:#a6e22e>dependency-groups</span>]
</span></span><span style=display:flex><span><span style=color:#a6e22e>test</span> = [<span style=color:#e6db74>&#34;pytest&#34;</span>, <span style=color:#e6db74>&#34;pytest-xdist&#34;</span>]
</span></span><span style=display:flex><span><span style=color:#a6e22e>lint</span> = [<span style=color:#e6db74>&#34;mypy&#34;</span>, <span style=color:#e6db74>&#34;isort&#34;</span>]
</span></span></code></pre></div><p>To install the <code>test</code> group, one can simply pass <code>--group test</code>.</p><div class="highlight command"><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-console data-lang=console><span style=display:flex><span>pip install --group test
</span></span></code></pre></div><p>You can repeat the option to install multiple groups. You can also use <code>--group</code> with
<code>-r</code>, <code>-e</code>, and any other dependency specifier.</p><div class="highlight command"><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-console data-lang=console><span style=display:flex><span>pip install . --group lint --group test -r my-old-requirements.txt
</span></span></code></pre></div><p>To install a dependency group from a <code>pyproject.toml</code> file that exists in a different
directory, state the path before the group separated with a colon.</p><div class="highlight command"><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-console data-lang=console><span style=display:flex><span>pip install --group ./dev/vem/pyproject.toml:lint
</span></span></code></pre></div><div class="admonition warning"><div class=admonition-header><svg viewBox="0 0 512 512"><path d="M256 32c14.2.0 27.3 7.5 34.5 19.8l216 368c7.3 12.4 7.3 27.7.2 40.1S486.3 480 472 480H40c-14.3.0-27.6-7.7-34.7-20.1s-7-27.8.2-40.1l216-368C228.7 39.5 241.8 32 256 32zm0 128c-13.3.0-24 10.7-24 24v112c0 13.3 10.7 24 24 24s24-10.7 24-24V184c0-13.3-10.7-24-24-24zm32 224a32 32 0 10-64 0 32 32 0 1064 0z"/></svg>
<span>Warning</span></div><div class=admonition-content><p>pip will <strong>NOT</strong> look in parent directories for a <code>pyproject.toml</code> file to
install dependency groups from. pip does not have the concept of a project
workflow.<sup id=fnref:2><a href=#fn:2 class=footnote-ref role=doc-noteref>2</a></sup></p><p>Additionally, Dependency Groups are a standardized feature, thus pip-specific options
are <strong>NOT</strong> supported. If you need to pass <code>--no-deps</code> or some other pip flag, you
should continue to use a <code>requirements.txt</code> file.<sup id=fnref:3><a href=#fn:3 class=footnote-ref role=doc-noteref>3</a></sup></p></div></div><p>Please read the <a href=https://pip.pypa.io/en/latest/user_guide/#dependency-groups target=_blank>pip user guide for more information</a>. You can also read
the motivation and rationale sections of <a href=https://peps.python.org/pep-0735/ target=_blank>PEP 735</a> if you are curious about why this
feature came about.</p><p>Thank you to <a href=https://github.com/sirosen target=_blank>Stephen Rosen</a> for writing and shepherding PEP 735 and contributing the pip
implementation. Congratulations! 🎉</p><h3 id=package-installation-progress-bar>Package installation progress bar<a hidden class=anchor aria-hidden=true href=#package-installation-progress-bar>#</a></h3><p>A progress bar has been added to <code>pip install</code> that tracks the installation
step.</p><video controls loop>
<source src=install-progress.webm></video><p>Previously, pip would provide no feedback on how many packages have been installed. Is pip
slowly installing a large package (e.g., torch) or is pip simply stuck? Who knows! The
only time you do know is when pip first needs to uninstall an existing package to install
a new version, emitting <code>Attempting uninstall: mypackage</code> as it goes.</p><p>Now, you can install every single [Home Hssistant] dependency and know much progress pip
has made after dependency resolution and downloads.</p><h3 id=resumable-downloads>Resumable downloads<a hidden class=anchor aria-hidden=true href=#resumable-downloads>#</a></h3><p>Support for automatic download retrying is available as an experimental feature starting
with pip 25.1. The download retry limit can be configured using the <code>--resume-retries</code>
option.</p><div class="admonition important"><div class=admonition-header><svg viewBox="0 0 512 512"><path d="M256 512A256 256 0 10256 0a256 256 0 100 512zm0-384c13.3.0 24 10.7 24 24v112c0 13.3-10.7 24-24 24s-24-10.7-24-24V152c0-13.3 10.7-24 24-24zM224 352a32 32 0 1164 0 32 32 0 11-64 0z"/></svg>
<span>Important</span></div><div class=admonition-content><p>Download retrying (<code>--resume-retries</code>) is separate from <em>connection</em> retrying
(<code>--retries</code>).</p></div></div><p>When a download terminates early, pip will attempt to resume the download from where it
left off. If the remote server does not support download resumption, pip will fall back to
restarting the download. If the download is still incomplete after pip has run out of
retries, a diagnostic error will be raised.</p><p><img alt="screeenshot of pip diagnostic incomplete-download error" loading=lazy src=/blog/2025/04/whats-new-in-pip-25.1/incomplete-download-error.png></p><p>It has been a long-standing complaint that pip is unreliable on poor/flaky connections.
<a href=https://github.com/pypa/pip/issues/4796 target=_blank>Any downloads of a sufficiently large package would fail midway through</a>,
forcing the user to retry the entire pip command, only for it to fail again. For users on
a slow or metered connection, pip is likely unusable. And if hash-checking was enabled,
then
<a href=https://github.com/pypa/pip/issues/11153 target=_blank>a confusing and misleading hash mismatch error would be raised</a>.</p><p>If you use the feature, <strong>please let us know how it goes</strong>! We want to make sure it works
well. Assuming nothing is fundamentally broken, <code>--resume-retries</code> will be changed in the
next release to allow a few download retries by default.</p><p>Thank you to <a href=https://github.com/gmargaritis target=_blank>George Margaritis</a> for contributing this feature!</p><h3 id=experimental-lockfile-pep-751-generation-pip-lock>Experimental lockfile (PEP 751) generation: <code>pip lock</code><a hidden class=anchor aria-hidden=true href=#experimental-lockfile-pep-751-generation-pip-lock>#</a></h3><p><code>pylock.toml</code> (<a href=https://peps.python.org/pep-0751/ target=_blank>PEP 751</a>) is the recently accepted standard for Python lockfiles.
Lockfiles are alternatives to the classic <code>requirements.txt</code> format, designed to enable
reproducible installation in a Python environment.</p><p>pip 25.1 makes the first step at supporting the new lockfile format. <a href=https://pip.pypa.io/en/latest/cli/pip_lock/ target=_blank>The <code>pip lock</code>
command</a> has been added to create a <code>pylock.toml</code> from a set of requirements.</p><p>Here&rsquo;s an example locking the pip project in editable mode and six.</p><div class="highlight command"><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-console data-lang=console><span style=display:flex><span>pip lock -e ./pip six --output - -qq
</span></span><span style=display:flex><span>lock-version = &#34;1.0&#34;
</span></span><span style=display:flex><span>created-by = &#34;pip&#34;
</span></span><span style=display:flex><span><span style=color:#960050;background-color:#1e0010>
</span></span></span><span style=display:flex><span><span style=color:#960050;background-color:#1e0010></span>[[packages]]
</span></span><span style=display:flex><span>name = &#34;pip&#34;
</span></span><span style=display:flex><span><span style=color:#960050;background-color:#1e0010>
</span></span></span><span style=display:flex><span><span style=color:#960050;background-color:#1e0010></span>[packages.directory]
</span></span><span style=display:flex><span>path = &#34;pip&#34;
</span></span><span style=display:flex><span>editable = true
</span></span><span style=display:flex><span><span style=color:#960050;background-color:#1e0010>
</span></span></span><span style=display:flex><span><span style=color:#960050;background-color:#1e0010></span>[[packages]]
</span></span><span style=display:flex><span>name = &#34;six&#34;
</span></span><span style=display:flex><span>version = &#34;1.17.0&#34;
</span></span><span style=display:flex><span><span style=color:#960050;background-color:#1e0010>
</span></span></span><span style=display:flex><span><span style=color:#960050;background-color:#1e0010></span>[[packages.wheels]]
</span></span><span style=display:flex><span>name = &#34;six-1.17.0-py2.py3-none-any.whl&#34;
</span></span><span style=display:flex><span>url = &#34;https://files.pythonhosted.org/packages/b7/ce/149a00dd41f10bc29e5921b496af8b574d8413afcd5e30dfa0ed46c2cc5e/six-1.17.0-py2.py3-none-any.whl&#34;
</span></span><span style=display:flex><span><span style=color:#960050;background-color:#1e0010>
</span></span></span><span style=display:flex><span><span style=color:#960050;background-color:#1e0010></span>[packages.wheels.hashes]
</span></span><span style=display:flex><span>sha256 = &#34;4721f391ed90541fddacab5acf947aa0d3dc7d27b2e1e8eda2be8970586c3274&#34;
</span></span></code></pre></div><p>The produced lockfile is specific to the Python version and platform pip is invoked under.
In other words, the lockfile is <strong>NOT</strong> a universal lockfile.</p><p>The command is experimental, meant to enable basic locked installation scenarios. It is
expected to undergo further development once the lockfile standard sees more widespread
adoption and matures.</p><p>Installing <em>from</em> a lockfile is <strong>unsupported</strong>, but
<a href=https://github.com/pypa/pip/issues/13334 target=_blank>it is on the roadmap</a>.</p><h3 id=pip-index-versions-is-stable><code>pip index versions</code> is stable<a hidden class=anchor aria-hidden=true href=#pip-index-versions-is-stable>#</a></h3><p>The <code>pip index versions</code> command is no longer experimental. It is the modern replacement
for the old <code>pip install mypackage==</code> hack which used to be an
<a href=https://github.com/pypa/pip/issues/12852 target=_blank>easy way to get the list of all available versions</a>.</p><div class="highlight command"><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-console data-lang=console><span style=display:flex><span>pip index versions six
</span></span><span style=display:flex><span>six (1.17.0)
</span></span><span style=display:flex><span>Available versions: 1.17.0, 1.16.0, 1.15.0, 1.14.0, 1.13.0, 1.12.0, 1.11.0, 1.10.0, 1.9.0, 1.8.0, 1.7.3, 1.7.2, 1.7.1, 1.7.0, 1.6.1, 1.6.0, 1.5.2, 1.5.1, 1.5.0, 1.4.1, 1.4.0, 1.3.0, 1.2.0, 1.1.0, 1.0.0, 0.9.2, 0.9.1, 0.9.0
</span></span><span style=display:flex><span>  INSTALLED: 1.17.0
</span></span><span style=display:flex><span>  LATEST:    1.17.0
</span></span></code></pre></div><p>In addition, you can now ask for JSON output using the <code>--json</code> flag.</p><div class="highlight command"><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-console data-lang=console><span style=display:flex><span>pip index versions six --json
</span></span><span style=display:flex><span>{&#34;name&#34;: &#34;six&#34;, &#34;versions&#34;: [&#34;1.17.0&#34;, &#34;1.16.0&#34;, &#34;1.15.0&#34;, &#34;1.14.0&#34;, &#34;1.13.0&#34;, &#34;1.12.0&#34;, &#34;1.11.0&#34;, &#34;1.10.0&#34;, &#34;1.9.0&#34;, &#34;1.8.0&#34;, &#34;1.7.3&#34;, &#34;1.7.2&#34;, &#34;1.7.1&#34;, &#34;1.7.0&#34;, &#34;1.6.1&#34;, &#34;1.6.0&#34;, &#34;1.5.2&#34;, &#34;1.5.1&#34;, &#34;1.5.0&#34;, &#34;1.4.1&#34;, &#34;1.4.0&#34;, &#34;1.3.0&#34;, &#34;1.2.0&#34;, &#34;1.1.0&#34;, &#34;1.0.0&#34;, &#34;0.9.2&#34;, &#34;0.9.1&#34;, &#34;0.9.0&#34;], &#34;latest&#34;: &#34;1.17.0&#34;, &#34;installed_version&#34;: &#34;1.17.0&#34;}
</span></span></code></pre></div><p>If you use <code>pip index versions</code> programmatically, you are encouraged to switch to the
<code>--json</code> output. Not only is it easier to parse, but you will avoid breakage if the
human-friendly format ever changes later.</p><p>Thank you to <a href=https://github.com/KrishanBhasin target=_blank>Krishan Bhasin</a> for stabilizing <code>pip index versions</code> and adding JSON support!</p><h2 id=key-bugfixes>Key bugfixes<a hidden class=anchor aria-hidden=true href=#key-bugfixes>#</a></h2><h3 id=dependency-resolution-improvements>Dependency resolution improvements<a hidden class=anchor aria-hidden=true href=#dependency-resolution-improvements>#</a></h3><p>Dependency resolution is not my area of expertise, so I&rsquo;m going to shamelessly steal the
changelog entries that <a href=https://github.com/notatallshaw target=_blank>Damian Shaw</a> wrote:</p><ul><li><p>Speed up resolution by first <em>only</em> considering the &ldquo;priorities&rdquo; of candidates that must
be required to complete the resolution.</p></li><li><p>Improved heuristics for determining the order of dependency resolution by preferring
direct URL candidates and requirements with upper bounds.<sup id=fnref:4><a href=#fn:4 class=footnote-ref role=doc-noteref>4</a></sup></p></li><li><p>The upgrade to ResolveLib 1.1.0 fixes a known issue where pip
<a href=https://github.com/pypa/pip/issues/12317 target=_blank><strong>would report a <code>ResolutionImpossible</code> error even though there is a valid solution</strong></a>.
However, some very complex scenarios that previously resolved may resolve slower or fail
with an <code>ResolutionTooDeep</code> error.</p></li><li><p>The <code>ResolutionTooDeep</code> error has been converted into a more user-friendly diagnostic
error. If you have any real-world examples that result in a <code>ResolutionTooDeep</code> error,
<a href=https://github.com/pypa/pip/issues/13281 target=_blank><strong>we would like to hear them</strong></a>!</p></li></ul><h3 id=legacy-egg-distributions-are-only-detected-once>Legacy <code>.egg</code> distributions are only detected once<a hidden class=anchor aria-hidden=true href=#legacy-egg-distributions-are-only-detected-once>#</a></h3><p>There are several formats that an installed package can be recorded in. Today, virtually
every package is installed using the <a href=https://packaging.python.org/en/latest/specifications/recording-installed-packages/ target=_blank><code>.dist-info</code> format</a>. However, legacy
<a href=https://setuptools.pypa.io/en/latest/deprecated/python_eggs.html target=_blank><code>.egg</code> distributions</a> are still kicking around.</p><p>Support for <code>.egg</code> distributions has been deprecated since pip 23.2. In pip 25.1, this
deprecation was finalized&mldr; but wait, pip still supports <code>.egg</code> distributions! It turns
out that <a href=https://docs.python.org/3/library/importlib.metadata.html target=_blank><code>importlib.metadata</code></a>, the library used to discover installed packages on Python
3.11+, supports <code>.egg</code> distributions just fine.</p><p>This meant that <code>.egg</code> distributions were being discovered several times. The
<code>importlib.metadata</code> backend would find it, and then the <a href=https://setuptools.pypa.io/en/latest/pkg_resources.html target=_blank><code>pkg_resources</code></a> backend,
leading to this confusing <code>pip list</code> output.</p><div class="highlight command"><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-console data-lang=console><span style=display:flex><span>pip list
</span></span><span style=display:flex><span>Package                       Version
</span></span><span style=display:flex><span>----------------------------- ---------------------
</span></span><span style=display:flex><span>mypackage                     0.7.16
</span></span><span style=display:flex><span>mypackage                     0.7.16
</span></span></code></pre></div><p>In pip 25.1, the <code>pkg_resources</code> backend is no longer used to discover <code>.egg</code>
distributions and this duplication will not occur. Warnings about the <code>.egg</code> deprecation
will no longer be printed.</p><h2 id=deprecations--upcoming-removals>Deprecations & upcoming removals<a hidden class=anchor aria-hidden=true href=#deprecations--upcoming-removals>#</a></h2><p>Starting with this release, the pip project no longer supports Python 3.8.</p><p>In addition, here is a list of current deprecations and the release they will be removed.
As always, any given removal may be <strong>pushed to a future release as needed</strong>.</p><dl><dt>Non-bare project name in egg fragment <em>To be removed in pip 25.2</em></dt><dd><a href=/blog/2025/01/whats-new-in-pip-25.0/#upcoming-removals>See the pip 25.0 post for more details.</a></dd><dt>Legacy setup.py editable installs <em>To be removed in pip 25.3</em></dt><dd>Please read <a href=https://github.com/pypa/pip/issues/11457 target=_blank>the deprecation issue for more details and advice</a>. This was
scheduled for removal in 25.0 and then 25.1, but it got pushed back (again) to coincide
with the deprecation of <code>setup.py bdist_wheel</code> installs.</dd><dt>Legacy setup.py <code>bdist_wheel</code> installs <em>To be removed in pip 25.3</em></dt><dd>Please read <a href=https://github.com/pypa/pip/issues/6334 target=_blank>the deprecation issue for more details and advice</a>, however,
the summary is that pip will stop running <code>setup.py bdist_wheel</code> directly to build a
wheel for installation. This is a compatibility fallback for old environments that do
not support the modern PEP 517 interface.</dd><dt>Non-standard wheel filenames <em>To be removed in pip 25.3</em></dt><dd>This is a continuation of the old deprecation as the original deprecation did not catch
all non-standard wheel filenames.
<a href=/blog/2025/01/whats-new-in-pip-25.0/#upcoming-removals>See the pip 25.0 post for more details.</a></dd></dl><h2 id=acknowledgements>Acknowledgements<a hidden class=anchor aria-hidden=true href=#acknowledgements>#</a></h2><p>Thank you to Damian Shaw, Emma Smith, Hugo van Kemenade, and Stéphane Bidoul reviewing the
draft of this post. Any typos or glaring mistakes are my own.</p><div class=footnotes role=doc-endnotes><hr><ol><li id=fn:1><p>They are not defined under the <code>project</code> table because Dependency Groups
are meant to be a general feature that work regardless of whether you have an actual Python
package to install or not.&#160;<a href=#fnref:1 class=footnote-backref role=doc-backlink>&#8617;&#xfe0e;</a></p></li><li id=fn:2><p>There has been extensive discussion about pip&rsquo;s fundamental design
and whether it should change. There is too much to easily summarize, but broadly, pip
has always been designed as a package manager, and <em>not</em> as a <em>project</em> workflow tool.
There are many other tools that compete in the project management space. The consensus
during review is that pip is valuable as a foundational tool that simply manages your
installed Python packages and does what you want without too much fuss. More practically,
shifting to a project-based model would constitute a major redesign of the pip UI and UX.&#160;<a href=#fnref:2 class=footnote-backref role=doc-backlink>&#8617;&#xfe0e;</a></p></li><li id=fn:3><p>This is a limitation of the specification. However, if sufficient
consensus builds around certain tool-specific flags, they can be standardized so they
can be included in Dependency Groups in the future.&#160;<a href=#fnref:3 class=footnote-backref role=doc-backlink>&#8617;&#xfe0e;</a></p></li><li id=fn:4><p>Please don&rsquo;t add upper bounds <strong>unless</strong> you know for a fact your codebase is
incompatible with the newer versions. Pre-emptive upper-bounds will not help
dependency resolution and <a href=https://iscinumpy.dev/post/bound-version-constraints/ target=_blank>are generally considered harmful</a>.&#160;<a href=#fnref:4 class=footnote-backref role=doc-backlink>&#8617;&#xfe0e;</a></p></li></ol></div></div><footer class=post-footer><ul class=post-tags><li><a href=https://ichard26.github.io/tags/pip/>Pip</a></li><li><a href=https://ichard26.github.io/tags/release/>Release</a></li></ul><nav class=paginav><a class=next href=https://ichard26.github.io/blog/2025/03/faster-pip-ci-on-windows-d-drive/><span class=title>Older »</span><br><span>Speeding up pip's Windows CI by setting TEMP to the D: drive</span></a></nav></footer></article></main><footer class=footer><span>© 2022-present, Richard Si</span> ·
<span>Powered by
<a href=https://gohugo.io/ rel="noopener noreferrer" target=_blank>Hugo</a> &
        <a href=https://github.com/adityatelange/hugo-PaperMod/ rel=noopener target=_blank>PaperMod</a></span></footer><a href=#top aria-label="go to top" title="Go to Top (Alt + G)" class=top-link id=top-link accesskey=g><svg viewBox="0 0 12 6" fill="currentcolor"><path d="M12 6H0l6-6z"/></svg>
</a><script>let menu=document.getElementById("menu");menu&&(menu.scrollLeft=localStorage.getItem("menu-scroll-position"),menu.onscroll=function(){localStorage.setItem("menu-scroll-position",menu.scrollLeft)}),document.querySelectorAll('a[href^="#"]').forEach(e=>{e.addEventListener("click",function(e){e.preventDefault();var t=this.getAttribute("href").substr(1);window.matchMedia("(prefers-reduced-motion: reduce)").matches?document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView():document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView({behavior:"smooth"}),t==="top"?history.replaceState(null,null," "):history.pushState(null,null,`#${t}`)})})</script><script>var mybutton=document.getElementById("top-link");window.onscroll=function(){document.body.scrollTop>800||document.documentElement.scrollTop>800?(mybutton.style.visibility="visible",mybutton.style.opacity="1"):(mybutton.style.visibility="hidden",mybutton.style.opacity="0")}</script><script>document.getElementById("theme-toggle").addEventListener("click",()=>{document.body.className.includes("dark")?(document.body.classList.remove("dark"),localStorage.setItem("pref-theme","light")):(document.body.classList.add("dark"),localStorage.setItem("pref-theme","dark"))})</script><script>document.querySelectorAll("pre > code").forEach(e=>{const n=e.parentNode.parentNode,t=document.createElement("button");t.classList.add("copy-code"),t.innerHTML="copy";function s(){t.innerHTML="copied!",setTimeout(()=>{t.innerHTML="copy"},2e3)}t.addEventListener("click",t=>{if("clipboard"in navigator){navigator.clipboard.writeText(e.textContent),s();return}const n=document.createRange();n.selectNodeContents(e);const o=window.getSelection();o.removeAllRanges(),o.addRange(n);try{document.execCommand("copy"),s()}catch{}o.removeRange(n)}),n.classList.contains("highlight")?n.appendChild(t):n.parentNode.firstChild==n||(e.parentNode.parentNode.parentNode.parentNode.parentNode.nodeName=="TABLE"?e.parentNode.parentNode.parentNode.parentNode.parentNode.appendChild(t):e.parentNode.appendChild(t))})</script></body></html>